<div class="crm-container">
  <div crm-ui-debug="$ctrl.myContact"></div>

  <h1 crm-page-title>{{ts('Resend Mailing')}}</h1>

  <form name="myForm" crm-ui-id-scope>

    <div class="help">
      <p>{{ts('This will send a copy of an already-sent mailing to the contact you choose.')}}</p>
    </div>

    <div class="crm-message messages warning crm-warn crm-warning crm-why-can-i-never-remember-the-right-classes">
      <p>{{ts('This is beta. It might do terrible things. It has not been fully tested. Use at your own risk.')}}</p>
    </div>

    <div crm-ui-field="{name: 'myForm.mailingID', title: ts('Mailing (last three monthsâ€™ mailings shown)')}">
      <select
        crm-ui-select="{allowClear:false, dropdownAutoWidth: true, width: '100%'}"
        ng-model="$ctrl.mailingID"
        name="mailingID"
        ng-options="(t.name + ' | ' + t.subject) for t in $ctrl.mailings track by t.id"
        >
      </select>
    </div>

    <div class="crm-section" >
      <div class="label">
        <label for="contact" class="control-label">{{ts('Contact')}}</label>
      </div>
      <div class="content">
        <input
          id="contact"
          name="myForm.contactID"
          ng-model="$ctrl.contactID"
          ng-change="$ctrl.updateEmail()"
          crm-entityref="{entity: 'Contact', select: {allowClear: true, placeholder: ts('Select Contact')}}"
          />
      </div>
    </div>

    <div crm-ui-field="{name: 'myForm.emailID', title: ts('Email')}">
      <select
        crm-ui-select="{allowClear:false, dropdownAutoWidth: true, width: '100%'}"
        ng-model="$ctrl.emailID"
        name="emailID"
        ng-options="e.email for e in $ctrl.emails track by e.id"
        >
      </select>
    </div>

    <div>
      <button ng-click="$ctrl.send()">{{ts('Send')}}</button>
    </div>

  </form>

</div>
